---
linux_groups: [ "sudo", "ssh", "mail", "users" ]

# Users
users:
  - name: "{{ansible_user}}"
    password: "$6$rounds=65600$eZOQjN0QU12ho..C$yIJReem2zkW1qq66UWz2MwfrCCBWs1ztzJZeVB3YjWCRIG85Fuh1q0CeWXfH.zyKELks4f2WflAcFNA2woxUX1"
    groups: ["sudo", "ssh"]
    authorized_ssh_key: "{{ lookup('file', lookup('env', 'HOME') + '/.ssh/id_ed25519.pub') }}"
    authorized_ssh_key_options: "no-agent-forwarding,no-port-forwarding,no-x11-forwarding"
    passwordless_sudo: true
  - name: "local-admin"
    password: "$6$rounds=65600$5CW03PKepJF6QoGC$wHXHJj.ATZKu/vuTYeXsSZrmvsJ4HPaYVXCMNUIvrmXbXSsSYNiNNoGIti2bHmGNXYNdiAG1wx/OTrpi41DPl."
    groups: ["sudo", "ssh", "mail", "users"]
    authorized_ssh_key: "{{ lookup('file', lookup('env', 'HOME') + '/.ssh/authorized_keys') }}"

# IP Config
ip_interfaces:
  management:
    address: "192.168.1.81/24"
    interface: "enp6s18"
    gateway: "192.168.1.1"

nameservers:
  - 192.168.1.1

# Locale
locale_timezone: "Europe/Zurich"
locale_locales:
  - "en_US.UTF-8"
  - "de_CH.UTF-8"
locale_keyboard_model: pc105
locale_keyboard_layout: ch

# Mail
mail_smtps_server: !vault |
          $ANSIBLE_VAULT;1.2;AES256;production
          31323664366431316332383165653531643364393932646338383661333636663761316438383030
          3861353336303161666433356436386631356134316566630a633962323037356336323463306436
          33636165333566316333343830353131376239396135303739383332643364393062666466396362
          6333646564313939350a663830656235333134623636623737626562663035613332343961616335
          37643435383530653237336135386533326163383833356334323862313962373136
mail_smtps_port: 465
mail_from_address: !vault |
          $ANSIBLE_VAULT;1.2;AES256;production
          64633730633963613163363432353232613030313761666436353362653565303433623361626334
          3839343663323234313063333361333036356232646564610a326334623937323537663631313931
          62633236303533333737303138346539323436313538383234313238316363656139643964343438
          6434376539633965350a393835633761373230663737626466396166306563623139356232343964
          61643563396566313061656164326232626236373365316262663830643835323262
mail_auth_user: !vault |
          $ANSIBLE_VAULT;1.2;AES256;production
          39356166396134613263646138306337386139383364636639376239376130653165616564393533
          6139326239373837356562666334383232653939376465650a363162323137346363666432366466
          39353039666263326263656530393435333037633334633433356362613061386334333763346238
          6563636631383330620a323061396332643132353330613465383531613563366335613532393536
          36373234326364333231366133636237353564616565613862663361666536653264
mail_auth_password: !vault |
          $ANSIBLE_VAULT;1.2;AES256;production
          66326238336638343765616133343235363038643336313434363634653635616666356534373665
          3032623231383034366562366166396630663035613431360a613865353161646262613066303135
          39663765633236653234373635356439376137383033306238326232323339323238623465363764
          3630663764353233380a303539656339376633623765646332376165636434303737333235643637
          63346432346230633365626239306465363234313464366139303335383264306361383438393363
          3231616461306362656463373837326566346537316535646430

# S.M.A.R.T.
disks:
  hdds:
    ids:
      - ata-WDC_WD101EFBX-68B0AN0_VH0EJRLM
      - ata-WDC_WD101EFBX-68B0AN0_VH0EXZ7M
      - ata-WDC_WD101EFBX-68B0AN0_VH0EYKDM
      - ata-WDC_WD101EFBX-68B0AN0_VH0EZXXM
      - ata-WDC_WD101EFBX-68B0AN0_VH0G0KEM
      - ata-WDC_WD101EFBX-68B0AN0_VH0G2V2M
      - ata-WDC_WD101EFBX-68B0AN0_VH0G3MEM
      - ata-WDC_WD101EFBX-68B0AN0_VH0G64TM
    apm: 128
    acoustic_management: 0
    spindown_time: 242
    write_cache: "off"
  ssds:
    ids:
      - ata-QEMU_HARDDISK_QM00013
      - ata-QEMU_HARDDISK_QM00015
  nvmes:
    ids:
      - nvme-Samsung_SSD_980_PRO_2TB_S69ENF0W905595N
      - nvme-Samsung_SSD_980_PRO_2TB_S69ENF0W953931E

smart_notification_dest_mail_address: !vault |
          $ANSIBLE_VAULT;1.2;AES256;production
          32373732316664656230396365643263306434393431356439653837626639613539386161613962
          3264616139353232356139643237383362353031373932300a633533653063643239616633343334
          61306131306530343431393030636663616364336239383630653461613531623931396463393936
          3233356465636464350a366261643239303066313130343131373637343337393331303665353538
          31303332376137383062666363363234383664653838303037613737633435373033
smart_notificatiom_from_mail_address: !vault |
          $ANSIBLE_VAULT;1.2;AES256;production
          64306162386261636533313263323661393962393033393934373037313863313263666235623430
          3832376439666162643936646239393861646665326266620a663731643261303963303937346131
          36636532333131623261323938366439663830303530373264633863396265376463633535323133
          6136306165623937330a633562383333383966336236666437656434653839346535366566653332
          66666464626461616534363932353263636430396634386462626336656238313632

# Datasets
datasets:
  - name: vault/media
    properties:
      recordsize: 1M
      casesensitivity: insensitive
  - name: vault/volumes
    properties:
      canmount: "off"
      mountpoint: none
  - name: vault/volumes/steam
    properties:
      volsize: 1TB
      # volblocksize: 256kB

# Samba
samba_local_master: false
samba_users:
  - name: "local-admin"
    password: !vault |
          $ANSIBLE_VAULT;1.2;AES256;production
          37646162363461323035633665396166323131393133656565306665306562343433363062356434
          6237363935363034623963633239646130636564353832370a623738306435613535656238333262
          64656339396638346330323635386330306434306230613662643031663039303263356432383539
          6439313133366234660a316432663030313366353437333532636266643730393830343166393538
          3339
samba_shares:
  - name: media
    comment: "Media Files"
    path: /mnt/vault/media
    user: root
    group: users
    writeable: "yes"

# UFW
ufw_services:
  - comment: Samba
    rule: allow
    from_ip: "{{ ip_interfaces.management.address | ansible.utils.ipaddr('network/prefix') }}"
    name: Samba
  - comment: iSCSI
    rule: allow
    from_ip: "{{ ip_interfaces.management.address | ansible.utils.ipaddr('network/prefix') }}"
    port: 3260
    proto: tcp
  - comment: iSCSI
    rule: allow
    from_ip: "{{ ip_interfaces.management.address | ansible.utils.ipaddr('network/prefix') }}"
    port: 3260
    proto: udp
